<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="참 잘했어요! 잘했도요.">
    <meta name="keywords" content="도전,챌린지,도전모임,결심,목표,동기부여,노력,새해목표,올해목표,새해맞이">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

    <link href="https://hangeul.pstatic.net/hangeul_static/css/NanumHarABeoJiEuiNaNum.css" rel="stylesheet">
    <link href="https://hangeul.pstatic.net/hangeul_static/css/nanum-gothic.css" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="challenge-list.css">

    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

    <title>잘했도요</title>
    <link rel="icon" href="icon/favicon.ico">
</head>

<body>
    <section class="view">
        <div id="header"></div>
        <div class="contents-wrap">
            <div class="filter-list">
                <div class="f-list1 tab-selected">인기</div>
                <div class="f-list2">추천</div>
                <div class="f-list3">신규</div>
            </div>
            <div class="filter-sub-list">
                <div class="f-s-list1 tab-selected">전체</div>
                <div class="f-s-list2">운동</div>
                <div class="f-s-list3">식습관</div>
                <div class="f-s-list4">생활</div>
                <div class="f-s-list5">정서</div>
                <div class="f-s-list6">취미</div>
                <div class="f-s-list7">환경</div>
            </div>
            <div class="search-bar">
                <input type="text" id="search" name="search" placeholder="검색어를 입력하세요.">
                <button>검색</button>
            </div>
            <div class="challenge-container">
                <div class="challenge-grid-item">
                    <a href="2.2_challenge-main.html">
                        <img src="img/drowing.jpg">
                        <h5>드로잉/크로키 연습</h5>
                        <p>그림을 그립시다.</p>
                    </a>
                </div>
                <div class="challenge-grid-item">
                    <a href="#">
                        <img src="img/coding_1.jpg">
                        <h5>코딩하기</h5>
                        <p>코딩합시다.</p>
                    </a>
                </div>
                <div class="challenge-grid-item">
                    <a href="#">
                        <img src="img/cycle.jpg">
                        <h5>자전거 꿈나무 모여라</h5>
                        <p>가보자고~</p>
                    </a>
                </div>
                <div class="challenge-grid-item">
                    <a href="#">
                        <img src="img/running.jpg">
                        <h5>달리기</h5>
                        <p>발에 불붙었어요!!</p>
                    </a>
                </div>
            </div>
        </div>
    </section>
    </section>
    <script>

        $(function () {
            $("#header").load("header.html");
        });

        // Ex) 서버에서 받아온 기프티콘 데이터 배열
        var challengeData = [
            { imgSrc: 'img/coding_1.jpg', name: '코딩하기', comment: '코딩합시다.' },
            { imgSrc: 'img/drowing.jpg', name: '드로잉/크로키 연습', comment: '그림을 그립시다.' },
            { imgSrc: 'img/cycle.jpg', name: '자전거 꿈나무 모여라', comment: '가보자고~' },
            { imgSrc: 'img/coding_2.jpg', name: '코딩하기', comment: '코딩이 재밌어요?' }
        ];

        var loadCount = 0; // 로드된 횟수 초기화

        $(window).scroll(function () {
            var scrollPosition = $(window).scrollTop();
            var windowHeight = $(window).height();
            var documentHeight = $(document).height();

            // 스크롤 위치의 오차를 늘립니다. (문서 하단 0.95배 지점까지 스크롤 하면, 새로 로드)
            if (scrollPosition >= 0.95 * documentHeight - windowHeight && loadCount < 4) {
                console.log('챌린지 페이지가 로드되었습니다.');
                for (var i = 0; i < challengeData.length; i++) {
                    var htmlContent = `<div class="challenge-grid-item">
                    <a href="#">
                        <img src="${challengeData[i].imgSrc}">
                        <h5>${challengeData[i].name}</h5>
                        <p>${challengeData[i].comment}</p>
                    </a>
                </div>`;
                    $(".challenge-container").append(htmlContent);
                }

                loadCount++; // 로드 횟수 증가
            }
        });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
</body>

</html>