<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="참 잘했어요! 잘했도요.">
    <meta name="keywords" content="도전,챌린지,도전모임,결심,목표,동기부여,노력,새해목표,올해목표,새해맞이">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

    <link href="https://hangeul.pstatic.net/hangeul_static/css/NanumHarABeoJiEuiNaNum.css" rel="stylesheet">
    <link href="https://hangeul.pstatic.net/hangeul_static/css/nanum-gothic.css" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="gifticon.css">

    <title>잘했도요</title>
    <link rel="icon" href="icon/favicon.ico">
</head>

<body>
    <section class="view">
        <div id="header"></div>
            <div class="contents-wrap">
                <div class="shop-container">
                    <div class="shop-item">
                        <a href="gifticon-detail.html">
                            <img src="img/gs25.png">
                            <h5>GS25 기프티콘</h5>
                            <p>3000원</p>
                        </a>
                    </div>
                    <div class="shop-item">
                        <a href="#">
                            <img src="img/gs25.png">
                            <h5>GS25 기프티콘</h5>
                            <p>5000원</p>
                        </a>
                    </div>
                    <div class="shop-item">
                        <a href="#">
                            <img src="img/CU.jpg">
                            <h5>CU 기프티콘</h5>
                            <p>3000원</p>
                        </a>
                    </div>
                    <div class="shop-item">
                        <a href="#">
                            <img src="img/CU.jpg">
                            <h5>CU 기프티콘</h5>
                            <p>5000원</p>
                        </a>
                    </div>
                    <div class="shop-item">
                        <a href="#">
                            <img src="img/711.png">
                            <h5>세븐일레븐 기프티콘</h5>
                            <p>3000원</p>
                        </a>
                    </div>
                    <div class="shop-item">
                        <a href="#">
                            <img src="img/711.png">
                            <h5>세븐일레븐 기프티콘</h5>
                            <p>5000원</p>
                        </a>
                    </div>
                </div>
            </div>
        </section>
    </section>
    <script>

$(function () {
      $("#header").load("header.html");
    });

        // Ex) 서버에서 받아온 기프티콘 데이터 배열
        var gifticonData = [
            { imgSrc: 'img/gs25.png', name: 'GS25 기프티콘', price: '3,000원' },
            { imgSrc: 'img/gs25.png', name: 'GS25 기프티콘', price: '5,000원' },
            { imgSrc: 'img/CU.jpg', name: 'CU 기프티콘', price: '3,000원' },
            { imgSrc: 'img/CU.jpg', name: 'CU 기프티콘', price: '5,000원' },
            { imgSrc: 'img/711.png', name: '세븐일레븐 기프티콘', price: '3,000원' },
            { imgSrc: 'img/711.png', name: '세븐일레븐 기프티콘', price: '5,000원' }
        ];

        // 스크롤 이벤트 리스너 등록
        var gifticonData = [
            { imgSrc: 'img/gs25.png', name: 'GS25 기프티콘', price: '3,000원' },
            { imgSrc: 'img/gs25.png', name: 'GS25 기프티콘', price: '5,000원' },
            { imgSrc: 'img/CU.jpg', name: 'CU 기프티콘', price: '3,000원' },
            { imgSrc: 'img/CU.jpg', name: 'CU 기프티콘', price: '5,000원' },
            { imgSrc: 'img/711.png', name: '세븐일레븐 기프티콘', price: '3,000원' },
            { imgSrc: 'img/711.png', name: '세븐일레븐 기프티콘', price: '5,000원' }
        ];

        var loadCount = 0; // 로드된 횟수 초기화

        $(window).scroll(function () {
            var scrollPosition = $(window).scrollTop();
            var windowHeight = $(window).height();
            var documentHeight = $(document).height();

            // 스크롤 위치의 오차를 늘립니다. (documentHeight의 0.95배 지점까지 스크롤 시 로드)
            if (scrollPosition >= 0.95 * documentHeight - windowHeight && loadCount < 4) {
                console.log('상품 페이지가 로드되었습니다.');
                for (var i = 0; i < gifticonData.length; i++) {
                    var htmlContent = `<div class="shop-item">
                    <a href="#">
                        <img src="${gifticonData[i].imgSrc}">
                        <h5>${gifticonData[i].name}</h5>
                        <p>${gifticonData[i].price}</p>
                    </a>
                </div>`;
                    $(".shop-container").append(htmlContent);
                }

                loadCount++; // 로드 횟수 증가
            }
        });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
</body>

</html>